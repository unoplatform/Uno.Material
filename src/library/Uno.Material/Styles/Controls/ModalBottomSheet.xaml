<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:android="http:///umbrella/ui/android"
					xmlns:controls="using:Uno.Material.Controls"
					xmlns:ios="http:///umbrella/ui/ios"
					xmlns:macos="http://uno.ui/macos"
					xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
					xmlns:toolkit="using:Uno.UI.Toolkit"
					xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:wasm="http://umbrella/ui/wasm"
					mc:Ignorable="ios android wasm macos">

	<ResourceDictionary.MergedDictionaries>
		<ResourceDictionary Source="../Application/Colors.xaml" />
	</ResourceDictionary.MergedDictionaries>

	<x:Double x:Key="MaterialModalBottomSheetWideScreenContentSize">600</x:Double>
	<x:Double x:Key="MaterialModalBottomSheetOpenedHeight">250</x:Double>
	<x:Double x:Key="MaterialModalBottomSheetElevation">8</x:Double>

	<Style x:Key="MaterialModalBottomSheetStyle"
		   TargetType="controls:ModalBottomSheet">

		<Setter Property="HorizontalAlignment"
				Value="Stretch" />
		<Setter Property="HorizontalContentAlignment"
				Value="Stretch" />
		<Setter Property="VerticalAlignment"
				Value="Stretch" />
		<Setter Property="VerticalContentAlignment"
				Value="Stretch" />

		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="controls:ModalBottomSheet">
					<Grid x:Name="GridRoot"
						  Background="{TemplateBinding Background}">
						<VisualStateManager.VisualStateGroups>
							<VisualStateGroup x:Name="CommonStates">
								<VisualState x:Name="Normal" />
								<VisualState x:Name="PointerOver" />
								<VisualState x:Name="Pressed" />
								<VisualState x:Name="Disabled" />
							</VisualStateGroup>
							<VisualStateGroup x:Name="FocusStates">
								<VisualState x:Name="Focused" />
								<VisualState x:Name="PointerFocused" />
								<VisualState x:Name="Unfocused" />
							</VisualStateGroup>

							<VisualStateGroup x:Name="SheetStates">
								<VisualState x:Name="Closed">

									<VisualState.Setters>
										<Setter Target="Part_Backdrop.Visibility"
												Value="Collapsed" />
									</VisualState.Setters>

									<Storyboard>
										<DoubleAnimation Storyboard.TargetName="Part_Modal_TranslateTransform"
														 Storyboard.TargetProperty="Y"
														 Duration="0:0:0.35"
														 From="{StaticResource MaterialModalBottomSheetOpenedHeight}"
														 To="1200">
											<DoubleAnimation.EasingFunction>
												<CubicEase EasingMode="EaseIn" />
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>

										<DoubleAnimation Storyboard.TargetName="Part_Backdrop"
														 Storyboard.TargetProperty="Opacity"
														 Duration="0:0:0.2"
														 From="1"
														 To="0">
											<DoubleAnimation.EasingFunction>
												<CubicEase EasingMode="EaseIn" />
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
									</Storyboard>
								</VisualState>

								<VisualState x:Name="Opened">

									<VisualState.Setters>
										<Setter Target="Part_Backdrop.Visibility"
												Value="Visible" />
									</VisualState.Setters>

									<Storyboard>
										<DoubleAnimation Storyboard.TargetName="Part_Modal_TranslateTransform"
														 Storyboard.TargetProperty="Y"
														 Duration="0:0:0.35"
														 To="{StaticResource MaterialModalBottomSheetOpenedHeight}">
											<DoubleAnimation.EasingFunction>
												<CubicEase EasingMode="EaseIn" />
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>

										<DoubleAnimation Storyboard.TargetName="Part_Backdrop"
														 Storyboard.TargetProperty="Opacity"
														 Duration="0:0:0.2"
														 To="1">
											<DoubleAnimation.EasingFunction>
												<CubicEase EasingMode="EaseIn" />
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>

							<!-- Handling of WideScreen devices -->
							<VisualStateGroup>
								<!--Known Issue - Must be applied before smalldevices else issues on wasm and ios-->
								<VisualState x:Name="OtherDevices">
									<VisualState.StateTriggers>
										<AdaptiveTrigger MinWindowWidth="720" />
									</VisualState.StateTriggers>
									<VisualState.Setters>
										<Setter Target="Part_Modal.HorizontalAlignment"
												Value="Center" />
										<Setter Target="Part_Modal.Width"
												Value="{StaticResource MaterialModalBottomSheetWideScreenContentSize}" />
									</VisualState.Setters>
								</VisualState>

								<VisualState x:Name="SmallDevices">
									<VisualState.StateTriggers>
										<AdaptiveTrigger MinWindowWidth="0" />
									</VisualState.StateTriggers>
								</VisualState>
							</VisualStateGroup>

						</VisualStateManager.VisualStateGroups>

						<Grid x:Name="Part_Backdrop"
							  Background="{ThemeResource MaterialOverlayBrush}"
							  HorizontalAlignment="Stretch"
							  Opacity="0"
							  VerticalAlignment="Stretch" />

						<!-- Modal -->
							<toolkit:ElevatedView x:Name="Part_Modal"
												  Background="{ThemeResource MaterialOverlayBrush}"
												  Elevation="{StaticResource MaterialModalBottomSheetElevation}"
												  IsHitTestVisible="True">
								<toolkit:ElevatedView.RenderTransform>
									<TranslateTransform x:Name="Part_Modal_TranslateTransform"
														Y="1200" />
								</toolkit:ElevatedView.RenderTransform>

								<ContentPresenter Content="{TemplateBinding Content}"
												  ContentTemplate="{TemplateBinding ContentTemplate}"
												  HorizontalAlignment="Stretch"
												  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
												  IsHitTestVisible="True"
												  VerticalAlignment="Stretch"
												  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
												  AutomationProperties.AccessibilityView="Raw" />
							</toolkit:ElevatedView>
						</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>
